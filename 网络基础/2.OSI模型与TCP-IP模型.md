#OSI模型与TCP/IP模型
[TOC]
##1.OSI七层框架
<font color=red>ISO</font>：_国际标准化组织_
<font color=red>OSI</font>：_开放系统互联_
<font color=red>IOS</font>：_思科交换机和路由器的操作系统_
![OSI七层框架](328bd8cc-0693-44da-8a9e-a27d932f634d_128_files/OSI_u4E03_u5C42_u6846_u67B6.png "OSI七层框架")
1.各层的主要作用：
- 第7层（应用层）：各种应用
- 第6层（表示层）：将汉字、英文、图片、声音和影像翻译为二进制
- 第5层（会话层）：判断当前数据是否要进行远程会话
- 第4层（传输层）：判断数据发送的协议（TCP/UDP），判断端口
- 第3层（网络层）：确定IP地址（源IP、目标IP）
- 第2层（数据链路层）：确定MAC地址
- 第1层（物理层）：通过网线和网卡等物理设备在主机之间进行数据的传输

##2.各层的主要作用*

| 层        | 作用           |
|:-------------:|:------------- |
|应用层|用户接口|
|表示层|数据的表示、安全、压缩|
|会话层|建立、管理、中止会话|
|传输层|可靠与不可靠的传输，传输的错误检测，流控|
|网络层|进行逻辑地址寻址，实现不同网络之间的路由选择|
|数据链路层|组帧，进行硬件地址寻址，差错检验等功能|
|物理层|设备之间的比特流传输，物理接口，电气特性等|

##3.TCP/IP模型
![TCP模型](328bd8cc-0693-44da-8a9e-a27d932f634d_128_files/TCP_u6A21_u578B.png "TCP模型")
现在一般被公认的就是TCP/IP 5，因为<font color=red>数据链路层</font>中的协议是真实的物理硬件交换机来完成的，不能将它归为<font color=red>网络接口层</font>中。


##4.TCP/IP协议族的组成
![TCP协议族](328bd8cc-0693-44da-8a9e-a27d932f634d_128_files/TCP_u534F_u8BAE_u65CF.png "TCP协议族")

- <font color=blue>__应用层__</font>
__HTTP__：超文本传输协议
__FTP__：文件传输协议
__TFTP__：简单文件传输协议，现在多用于思科路由器和交换机升级操作系统。
__SMTP__：简单邮件传输协议
__POP3__：邮局协议3代
__SNMP__：简单网络管理协议$\Rightarrow$集群监控服务器
__DNS__：域名系统
- <font color=EEE9>__传输层__</font>
__TCP__：传输控制协议
__UDP__：用户数据报协议
- <font color=green>__网络层__</font>
__IP__：网际协议
__ARP__：(__Address Resolution Protocol__)，地址解析协议。将一个已知的IP地址解析成MAC地址。
__RARP__：反向地址解析协议
__ICMP__：互联网控制消息协议
__IGMP__：网络组管理协议
- 物理层
__PPP__：点对点协议
__PPPOE__：点对点拨号协议


##5.数据包封装过程


|层|封装|解封装|
| :---: | :---- | :---- |
|应用层|$\Downarrow$上层数据|$\Uparrow$上层数据|
|传输层|$\Downarrow$上层数据<font color=red>__+TCP头部__</font>|$\Uparrow$上层数据<font color=red>__-TCP头部__</font>|
|网络层|$\Downarrow$上层数据+TCP头部<font color=red>__+IP头部__</font>|$\Uparrow$上层数据+TCP头部<font color=red>__-IP头部__</font>|
|数据链路层|$\Downarrow$上层数据+TCP头部+IP头部<font color=red>__+MAC头部__</font>|$\Uparrow$上层数据+TCP头部+IP头部<font color=red>__-MAC头部__</font>|
|物理层|$\Downarrow$比特流|$\Uparrow$比特流|


##6.设备与层之间对应的关系*


|层|设备|
| :----: | :---: |
|应用层|计算机|
|传输层|防火墙|
|网络层|路由器|
|数据链路层|交换机|
|物理层|网卡|
位于高层的设备可以认识底层的东西，但是底层的设备不能识别高层的协议。
MAC地址是固化在网卡的ROM中。


##7.各层之间通信*
![各层之间通信](328bd8cc-0693-44da-8a9e-a27d932f634d_128_files/_u5404_u5C42_u4E4B_u95F4_u901A_u4FE1.PNG "各层之间通信")


>计算机A向计算机B发送数据。</br>从应用层到传输层，在传输层中数据包封入源端口和目标端口，比如网页服务，源端口是随机的，目标端口是80；</br>从传输层到网络层，在网络层中写入源IP和目标IP，源IP是A主机的IP地址，目标IP是B主机的IP地址；</br>从网络层到数据链路层，在数据链路层中写入源MAC地址和目标MAC地址，源MAC是A主机的MAC地址，目标MAC是交换机的MAC地址；</br>数据包通过物理层发送;</br>数据包被交换机的1/0口接收，交换机获取包头中的目标MAC地址，通过泛洪向局域网内所有网卡的MAC地址发起询问。</br>路由器回应后，交换机通过网线将数据包发送至路由器。</br>路由获取数据包后读取包头中目标MAC地址，确定是本机的MAC地址后，将数据包向上一层传递。</br>网络层获取数据包中的目标IP地址，通过广播向网络中所有的路由器询问目标IP地址。</br>B路由器回复信息，A路由器将B路由器的MAC地址更改为数据包包头中的目标MAC地址。</br>数据包传递给B路由器，路由器确定过MAC地址后，将数据包向上层传递。</br>路由器确定目标IP后，确认这个数据包是传给自己的，传给交换机B。</br>交换机读取包头中的MAC地址，对照内存中的MAC对照表，通过RARP协议将IP翻译为MAC地址，传送给目标IP的主机。




